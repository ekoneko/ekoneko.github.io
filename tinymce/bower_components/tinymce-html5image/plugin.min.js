(function(){tinymce.PluginManager.add("html5image",function(d){var e,f,g,h,i,b,c;e=function(){b.setAttribute("style","background:#f8ffe5;")};f=function(a){a.stopPropagation();a.preventDefault()};g=function(a){a.stopPropagation();a.preventDefault();b.setAttribute("style","");a=a.dataTransfer.files[0];a.type&&/image\/((jpeg)|(png)|(gif)|(jpg))/.test(a.type)&&c(a)};h=function(a){(30>a.x||a.x>b.clientWidth-30||30>a.y||a.y>b.clientHeight-30)&&b.setAttribute("style","")};i=function(a){var b;"undefined"===
typeof a.clipboardData.types||0===a.clipboardData.types.length||(b=a.clipboardData.types[0],"Files"===b&&(b=a.clipboardData.items[0].getAsFile(),c(b),a.stopPropagation(),a.preventDefault()))};c=function(a){var b=new FileReader;b.onload=function(a){d.insertContent('<img src="'+a.target.result+'" />')};b.readAsDataURL(a)};"undefined"!==typeof ImageData&&setTimeout(function(){b=d.dom.doc.body;b.addEventListener("dragenter",e,!1);b.addEventListener("dragover",f,!1);b.addEventListener("drop",g,!1);b.addEventListener("dragleave",
h,!1);b.addEventListener("paste",i,!1)},0)})})();